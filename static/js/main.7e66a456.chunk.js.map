{"version":3,"sources":["images/logo.PNG","components/globalstyles.js","components/AdminPanel.js","components/Status.js","components/ServiceBlock.js","components/HomePage.js","index.js"],"names":["module","exports","Header","styled","div","Title","h1","Logo","img","Sub","h3","AdminPanelStyle","form","MyFormGroup","AdminLabel","label","MyFormControl","input","MyFormBtn","button","AdminPanel","props","state","newUrl","allEnabled","pinging","handleChange","bind","handleSubmit","event","target","name","value","this","setState","preventDefault","addNewUrl","requestOptions","method","body","fetch","then","response","json","isAllEnabled","prevState","PingLabel","Form","Label","as","Style","style","color","EnableLabel","onSubmit","InputGroup","Button","type","onClick","togglePinging","pingHandler","FormControl","onChange","placeholder","Append","enableAll","Component","Status","nextProps","latency","statusBox","StatusBox","theme","background","href","rel","p","ServiceBlock","keyVals1","Object","entries","latencyMap","map","idx","key","keyVals2","keyVals3","keyVals4","Container","fluid","Row","Col","xs","sm","md","lg","HomePage","endpoints","results","ok","console","log","statusText","data","endpointNames","doLatencyChecks","clearInterval","interval","latencyCheck","adminPanelRef","current","React","createRef","initPings","length","numSWPeople","catch","error","numGhibPeople","setInterval","listLength","endpointList","src","logo","alt","ref","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7e66a456.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.8d277a21.PNG\";","import styled from 'styled-components'\r\n\r\n// Page styles\r\nexport const Header = styled.div`\r\n\tline-height: 15px;\r\n    vertical-align: middle;\r\n\ttext-align: center;\r\n`\r\nexport const Title = styled.h1`\r\n\twidth: 95%;\r\n\tdisplay: inline-block;\r\n\tcolor: cornflowerblue;\r\n\tmargin-bottom: .2rem;\r\n\tfont-family: 'Mulish';\r\n\tfont-size: 2em;\r\n\tfont-weight: 500;\r\n`\r\n\r\n// Homepage styles\r\nexport const Logo = styled.img`\r\n\tmargin: 1em;\r\n\tmax-width: 4em;\r\n    vertical-align: middle;\r\n`\r\n\t\r\nexport const Sub = styled.h3`\r\n\tdisplay: inline-block;\r\n\tcolor: #647eed;\r\n\tfont-family: 'Mulish';\r\n\tmargin: 0em;\r\n`\r\n\r\n// Panel styles\r\nexport const AdminPanelStyle = styled.form`\r\n\tbackground-color: pink;\r\n\twidth: 40%;\r\n\tborder-width:5px;  \r\n\tborder-style:groove;\r\n\tmargin: 0 auto;\r\n`\r\n\r\nexport const MyFormGroup = styled.div`\r\n\tmargin: 1em; \r\n\tmax-width: 95%;\r\n`\r\nexport const AdminLabel = styled.label`\r\n\tcolor: #647eed;\r\n\tvertical-align: middle;\r\n\twidth: 40%;\r\n\ttext-align: left;\r\n\tfont-weight: 500;\r\n\tmargin-bottom: 0;\r\n\tdisplay: flex;\r\n    align-items: center;\r\n`\r\n\r\nexport const MyFormControl = styled.input`\r\n\tmax-width: 120px;\r\n`\r\n\r\nexport const MyFormBtn = styled.button`\r\n\tmin-width: 80px;\r\n\twidth: 15%;\r\n`","import React, {Component} from 'react'\r\nimport * as Style from './globalstyles.js'\r\nimport styled from 'styled-components'\r\nimport { Button, FormControl, Form, InputGroup } from 'react-bootstrap';\r\n\r\nclass AdminPanel extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tnewUrl: \"\",\r\n\t\t\tallEnabled: false,\r\n\t\t\tpinging: this.props.pinging\r\n\t\t}\r\n\t\tthis.handleChange = this.handleChange.bind(this)\r\n        this.handleSubmit = this.handleSubmit.bind(this)\r\n\t}\r\n\t\r\n\thandleChange(event) {\r\n        const {name, value} = event.target\r\n        this.setState({\r\n            [name]: value\r\n        }) \r\n    }\r\n    \r\n    handleSubmit(event) {\r\n\t\tevent.preventDefault()\r\n\t\tthis.addNewUrl()\r\n\t}\r\n\r\n\taddNewUrl() {\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: this.state.newUrl\r\n    \t}\r\n\t\tfetch('/api/endpoint/add', requestOptions).then(response => response.json())\r\n\t}\r\n\r\n\tenableAll() {\r\n\t\tconst isAllEnabled = this.state.allEnabled\r\n\t\tconst requestOptions = {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tbody: isAllEnabled\r\n    \t}\r\n\t\tfetch('/api/endpoint/enableall', requestOptions).then(response => response.json())\r\n\t\tthis.setState({\r\n\t\t\tnewUrl: this.state.newUrl,\r\n\t\t\tallEnabled: !isAllEnabled,\r\n\t\t\tpinging: this.state.pinging\r\n\t\t})\r\n\t}\r\n\r\n\ttogglePinging() {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tnewUrl: prevState.newUrl,\r\n\t\t\tallEnabled: prevState.allEnabled,\r\n\t\t\tpinging: !prevState.pinging\r\n\t\t}))\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tvar PingLabel\r\n\t\tif (this.state.pinging) {\r\n\t\t\tPingLabel = <Form.Label as={Style.AdminLabel} style={{color: \"lightseagreen\"}}>\r\n\t\t\t\tPinging\r\n\t\t\t</Form.Label>\r\n\t\t}\r\n\t\telse {\r\n\t\t\tPingLabel = <Form.Label as={Style.AdminLabel} style={{color: \"darkred\"}}>\r\n\t\t\t\tOff\r\n\t\t\t</Form.Label>\r\n\t\t}\r\n\r\n\t\t\r\n\t\tvar EnableLabel = <Form.Label as={Style.AdminLabel}>\r\n\t\t\t\t{this.state.allEnabled ? 'Disable all' : 'Enable all'}\r\n\t\t</Form.Label>\r\n\r\n\t\treturn (<Form as={Style.AdminPanelStyle} onSubmit={this.handleSubmit}>\r\n\t\t\t\t<Style.Title>Admin Panel</Style.Title>\r\n\t\t\t\t<InputGroup as={Style.MyFormGroup}>\r\n\t\t\t\t\t{PingLabel}\r\n\t\t\t\t\t<Button as={Style.MyFormBtn} type=\"button\" onClick={() => {this.togglePinging(); this.props.pingHandler()}}>Toggle</Button>\r\n\t\t\t\t</InputGroup>\r\n\t\t\t\t<InputGroup as={Style.MyFormGroup}>\r\n\t\t\t\t\t<FormControl as={Style.MyFormControl}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\tname=\"newUrl\" \r\n\t\t\t\t\t\tvalue={this.state.newUrl}\r\n\t\t\t\t\t\tonChange={this.handleChange} \r\n\t\t\t\t\t\tplaceholder=\"Add url to ping\" \r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<InputGroup.Append>\r\n\t\t\t\t\t\t<Button>Add</Button>\r\n\t\t\t\t\t</InputGroup.Append>\r\n\t\t\t\t</InputGroup>\r\n\t\t\t\t<InputGroup as={Style.MyFormGroup}>\r\n\t\t\t\t\t<Form.Label as={Style.AdminLabel}>\r\n\t\t\t\t\t\t{EnableLabel}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Button as={Style.MyFormBtn} type=\"button\" onClick={() => this.enableAll()}>Go</Button>\r\n\t\t\t\t</InputGroup>\r\n\t\t\t</Form>)\r\n\t}\r\n}\r\n\r\nexport const AdminLabel = styled.label`\r\n\tcolor: #647eed;\r\n\tvertical-align: middle;\r\n\twidth: 40%;\r\n\tline-height: 2em;\r\n\ttext-align: left;\r\n`\r\n\r\nexport default AdminPanel","import React, {Component} from 'react'\nimport styled from 'styled-components'\n\nclass Status extends Component {\n\n\tshouldComponentUpdate(nextProps) {\n\t\treturn this.props.latency !== nextProps.latency;\n\t}\n\n\trender() {\n\t\tconst AVERAGE_PING = 100\n\t\tconst HIGH_PING = 300\n\t\tconst DISABLED = 999\n\n\t\tconst latency = this.props.latency;\n\n\t\tlet statusBox;\n\t\tif (latency === DISABLED) {\n\t\t\tstatusBox = <StatusBox theme={{background: \"#808080\"}}>{latency}ms</StatusBox>\n\t\t} else if (latency < AVERAGE_PING) {\n\t\t\tstatusBox = <StatusBox theme={{background: \"#409920\"}}>{latency}ms</StatusBox>\n\t\t} else if (latency < HIGH_PING) {\n\t\t\tstatusBox = <StatusBox theme={{background: \"#999120\"}}>{latency}ms</StatusBox>\n\t\t} else {\n\t\t\tstatusBox = <StatusBox theme={{background: \"#994020\"}}>{latency}ms</StatusBox>\n\t\t}\n\t\treturn (\n\t\t<div>\n\t\t\t<link href='https://fonts.googleapis.com/css?family=Mulish' rel='stylesheet' />\n\t\t\t<div>\n\t\t\t\t<Label>{this.props.name}</Label>\n\t\t\t\t{statusBox}\n\t\t\t</div>\n\t\t</div>\n\t\t)\n\t}\n}\n\nconst StatusBox = styled.div`\n\tborder-style: groove;\n\tborder-width: 2px;\n\theight: 2em;\n\twidth: 17em;\n\tbackground-color: ${props => props.theme.background};\n    vertical-align: middle;\n\ttext-align: center;\n\tcolor: white;\n\tfont-family: 'Mulish';\n\tfont-weight: 100;\n\tmargin-left: 2em;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n`\n\nconst Label = styled.p`\n\tdisplay: flex;\n\talign-items: center;\n\tfont-family: 'Mulish';\n\theight: 2em;\n\twidth: 5em;\n\tmargin: 0em;\n\tmargin-top: 1em;\n`\n\nexport default Status;\n","import React, {Component} from 'react'\r\nimport {Container, Row, Col} from 'react-bootstrap'\r\nimport Status from './Status.js'\r\nimport styled from 'styled-components'\r\n\r\nclass ServiceBlock extends Component {\r\n\r\n\trender() {\r\n\t\tvar keyVals1 = Object.entries(this.props.latencyMap).map(([name, latency], idx) => {\r\n\t\t\treturn idx % 4 === 0 ? <Status key={idx} name={name} latency={latency} /> : null\r\n\t\t})\r\n\t\tvar keyVals2 = Object.entries(this.props.latencyMap).map(([name, latency], idx) => {\r\n\t\t\treturn idx % 4 === 1 ? <Status key={idx} name={name} latency={latency} /> : null\r\n\t\t})\r\n\t\tvar keyVals3 = Object.entries(this.props.latencyMap).map(([name, latency], idx) => {\r\n\t\t\treturn idx % 4 === 2 ? <Status key={idx} name={name} latency={latency} /> : null\r\n\t\t})\r\n\t\tvar keyVals4 = Object.entries(this.props.latencyMap).map(([name, latency], idx) => {\r\n\t\t\treturn idx % 4 === 3 ? <Status key={idx} name={name} latency={latency} /> : null\r\n\t\t})\r\n\t\treturn (\r\n\t\t\t<Container fluid>\r\n  \t\t\t\t<Row>\r\n\t\t\t\t\t<Col xs={8} sm={6} md={4} lg={3}>\r\n\t\t\t\t\t\t{keyVals1}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={8} sm={6} md={4} lg={3}>\r\n\t\t\t\t\t\t{keyVals2}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={8} sm={6} md={4} lg={3}>\r\n\t\t\t\t\t\t{keyVals3}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t\t<Col xs={8} sm={6} md={4} lg={3}>\r\n\t\t\t\t\t\t{keyVals4}\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</Container >\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ServiceBlock","import React, {Component} from 'react'\r\nimport AdminPanel from './AdminPanel.js'\r\nimport ServiceBlock from './ServiceBlock.js'\r\nimport * as Style from './globalstyles.js'\r\nimport logo from '../images/logo.PNG'\r\n\r\nclass HomePage extends Component {\r\n\r\n\tconstructor() {\r\n\t\tsuper()\r\n\t\tthis.state = {\r\n\t\t\tlatencyCheck: [],\r\n\t\t\tpinging: true,\r\n\t\t\tnewUrl: \"\"\r\n\t\t}\r\n\t\t// Exposes the method and state\r\n\t\tthis.adminPanelRef = React.createRef()\r\n    \tthis.pingHandler = this.pingHandler.bind(this)\r\n\t}\r\n\t\r\n\tpingHandler() {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tlatencyCheck: prevState.latencyCheck, pinging: !prevState.pinging, newUrl: prevState.newUrl\r\n\t\t}), this.initPings)\r\n\t}\r\n\t\r\n    callPeopleServices() {\r\n        fetch('https://swapi.dev/api/people/?format=json')\r\n            .then(results => {\r\n                if (!results.ok) {\r\n                \tconsole.log(\"Failed getting swapi data: \" + results.statusText)\r\n                }\r\n                return results.json();\r\n            }).then(data => {\r\n                console.log(\"SWAPI data fetched; there are \" + data.results.length)\r\n                this.setState({ numSWPeople: data.results.length })\r\n            }).catch(error => {\r\n                console.log(error)\r\n            });\r\n        fetch('https://ghibliapi.herokuapp.com/people/?format=json')\r\n            .then(results => {\r\n                if (!results.ok) {\r\n                \tconsole.log(\"Failed getting Ghibli data: \" + results.statusText)\r\n                }\r\n                return results.json();\r\n            }).then(data => {\r\n                console.log(\"Ghibli data fetched; there are \" + data.length)\r\n                this.setState({ numGhibPeople: data.length })\r\n            }).catch(error => {\r\n                console.log(error)\r\n            })\r\n\t}\r\n\t\r\n\tendpoints = () => {\r\n        fetch('/api/endpointNames')\r\n    \t\t.then(results => {\r\n                if (!results.ok) {\r\n                \tconsole.log(\"Failed getting endpoint names: \" + results.statusText)\r\n                }\r\n\t\t\t\treturn results.json()\r\n\t\t\t})\r\n            .then(data => {\r\n                this.setState({endpointNames: data})\r\n            })\r\n    }\r\n\t\r\n\tdoLatencyChecks = () => {\r\n        fetch('/api/latencyCheck')\r\n    \t\t.then(results => {\r\n                if (!results.ok) {\r\n\t\t\t\t\t// TODO: If 504 Gateway timeout cancel 5s refresh?\r\n                \tconsole.log(\"Failed getting endpoints data: \" + results.statusText + \"; is the server running?\")\r\n  \t\t\t\t\tclearInterval(this.interval)\r\n\t\t\t\t\tthis.setState((prevState) => {\r\n\t\t\t\t\t\treturn {latencyCheck: prevState.latencyCheck, pinging: false, newUrl: prevState.newUrl};\r\n\t\t\t\t\t})\r\n                \tconsole.log(\"Pings stopped; state's pinging is: \" + this.state.pinging)\r\n\t\t\t\t\tthis.adminPanelRef.current.togglePinging()\r\n                }\r\n\t\t\t\treturn results.json()\r\n\t\t\t})\r\n            .then(data => {\r\n                this.setState({latencyCheck: data})\r\n            })\r\n    }\r\n\r\n    componentDidMount() {\r\n\t\tthis.endpoints()\r\n\t\tthis.doLatencyChecks()\r\n\t\tthis.initPings()\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n  \t\tclearInterval(this.interval)\r\n\t\tconsole.log(\"Page interval cleared\")\r\n\t}\r\n\r\n\tshouldComponentUpdate(nextProps) {\r\n\t\treturn this.state.pinging !== nextProps.pinging;\r\n\t}\r\n\t\r\n\tinitPings() {\r\n\t\tif (this.state.pinging) {\r\n\t\t\tconsole.log(\"Restarted 5s pings\")\r\n\t\t\tthis.interval = setInterval(() => this.doLatencyChecks(), 5000)\r\n\t\t}\r\n\t\telse {\r\n  \t\t\tclearInterval(this.interval)\r\n\t\t\tconsole.log(\"Pings manually turned off\")\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tvar listLength = this.state != null && this.state.endpointList != null ? this.state.endpointNames.length : 0\r\n\t\treturn (<div>\r\n\t\t\t<Style.Header>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Style.Logo src={logo} alt=\"Logo\"></Style.Logo>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Style.Title>Service Status Dash</Style.Title>\r\n\t\t\t\t\t\t<Style.Sub>Page refreshes every 5s {listLength > 0 ? '; There are ' + listLength + ' endpoints' : ''}</Style.Sub>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<ServiceBlock latencyMap={this.state.latencyCheck} />\r\n\t\t\t\t</div>\r\n\t\t\t</Style.Header>\r\n\t\t\t<br />\r\n\t\t\t<Style.Header>\r\n\t\t\t\t<AdminPanel pingHandler={this.pingHandler} pinging={this.state.pinging} ref={this.adminPanelRef}/>\r\n\t\t\t</Style.Header>\r\n\t\t</div>)\r\n\t}\r\n}\r\n\r\nexport default HomePage","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport HomePage from './components/HomePage.js';\n\nReactDOM.render(\n\t<HomePage />, \n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}